(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{178:function(e,t,n){"use strict";var a,r=n(21),o=n.n(r),i=n(54),c=n(180),l=n(181),s=n(0),u=n.n(s),f=n(79),d=n(258),m=n(138),p=n.n(m),g=n(179),b=n(1),h=n(3),v=n(18),y=n(105),O=n(102),k=n(139);!function(e){e.DarkZero="#292d3d",e.DarkOne="#37324e",e.DarkTwo="#4d355b",e.DarkThree="#693462",e.DarkFive="#853161",e.DarkEight="#a02d59",e.DarkThirteen="#b62e49",e.DarkTwentyOne="#c63834",e.DarkUnknown="#cd4b13",e.DarkDisabled="#333",e.LightZero="#eaeaeb",e.LightOne="#e4deec",e.LightTwo="#e5d1e9",e.LightThree="#ebc2e0",e.LightFive="#f4b2cf",e.LightEight="#fba2b7",e.LightThirteen="#fe949a",e.LightTwentyOne="#fb8978",e.LightUnknown="#ef8354",e.LightDisabled="#ccc"}(a||(a={}));var E,S=n(15),w=n.n(S),j=n(259),C=n(260),D=function(e){var t=e.color,n=e.icon,a=e.label,r=e.mode,o=e.onPress,i=Object(v.b)(),c=Object(s.useCallback)((function(e){return u.a.createElement(j.a,w()({},e,{style:{margin:0},color:i.colors.text,icon:n}))}),[n,i.colors.text]);return u.a.createElement(C.a,{style:{marginHorizontal:8},accessibilityRole:"button",color:null!=t?t:i.colors.accent,icon:c,mode:r,onPress:o},u.a.createElement(O.a,{style:{fontWeight:"bold"}},a))},P=n(8),x=n.n(P),R=n(116),V=n.n(R),I=n(7);!function(e){e.JoinRequest="JoinRequest",e.JoinResponse="JoinResponse",e.LeaveRequest="LeaveRequest",e.Reset="Reset",e.Reveal="Reveal",e.RoomUpdate="RoomUpdate",e.SetName="SetName",e.SetVoteValue="SetVoteValue"}(E||(E={}));var W=function(e,t){e.readyState===WebSocket.OPEN&&e.send(JSON.stringify(t))},L=function(e){0},T=function(){var e=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)||void 0}("roomId"),t=function(){if(e)return e;var t=new V.a(4).toString();return"web"===I.a.OS&&(window.location.search="roomId="+t),t}(),n=Object(s.useState)("Guest"),a=o()(n,2),r=a[0],c=a[1],l=Object(s.useState)(),u=o()(l,2),f=u[0],d=u[1],m=Object(s.useState)(),p=o()(m,2),g=p[0],b=p[1],h=function(e,t,n){var a=Object(s.useMemo)((function(){var a=new WebSocket("wss://planningpokerserver.herokuapp.com/");return a.onopen=e,a.onmessage=t,a.onerror=n,a}),[]);return Object(s.useEffect)((function(){a.onmessage=t}),[t,a]),Object(s.useEffect)((function(){a.onerror=n}),[n,a]),a}(Object(s.useCallback)((function(){!function(){var e,n;x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,x.a.awrap(i.a.getItem("username"));case 3:e=a.sent,n={type:E.JoinRequest,roomId:t,payload:{name:null!=e?e:"Guest"}},W(h,n);case 6:case"end":return a.stop()}}),null,null,null,Promise)}()}),[]),Object(s.useCallback)((function(e){if("Heartbeat"!==e.data)try{var t=JSON.parse(e.data);switch(t.type){case E.JoinResponse:b(t.payload.userId);break;case E.RoomUpdate:0,k(t.payload.room),g&&"hidden"!==t.payload.room.users[g].voteValue&&d(t.payload.room.users[g].voteValue)}}catch(n){console.error("Error while parsing JSON",e.data)}else console.log("Received heartbeat from server")}),[g]),L),v=Object(s.useState)({id:t||new V.a(4).toString(),name:"",users:{},admin:void 0}),y=o()(v,2),O=y[0],k=y[1],S=Object(s.useCallback)((function(e){c(e);var t={type:E.SetName,roomId:O.id,payload:{name:e}};W(h,t)}),[O.id,h]),w=Object(s.useCallback)((function(e){d(e);var t={type:E.SetVoteValue,roomId:O.id,payload:{voteValue:e}};W(h,t)}),[O.id,h]);return{name:r,reset:Object(s.useCallback)((function(){d(void 0);var e={type:E.Reset,roomId:O.id};W(h,e)}),[O.id,h]),reveal:Object(s.useCallback)((function(){var e={type:E.Reveal,roomId:O.id};W(h,e)}),[O.id,h]),room:O,setName:S,userId:g,vote:w,voteValue:f}},N=function(){var e=Object(s.useState)("dark"===f.Appearance.getColorScheme()),t=o()(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){var e=f.Appearance.addChangeListener((function(e){var t=e.colorScheme;a("dark"===t)}));return function(){return e.remove()}}),[]),n},z=function(e){var t=Object(v.b)(),n=Object(s.useState)(e(t)),a=o()(n,2),r=a[0],i=a[1];return Object(s.useEffect)((function(){i(e(t))}),[e,t]),r},F=function(e){var t=e.children,n=e.mode;return u.a.createElement(h.a,{style:[U.flexWrapRow,{justifyContent:n}]},t)},U=b.a.create({flexWrapRow:{alignItems:"center",alignSelf:"stretch",flexDirection:"row",flexWrap:"wrap",marginVertical:16}}),J=n(255),H=b.a.create({body1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.5},body2:{fontFamily:"Poppins",fontSize:14,fontWeight:"400",letterSpacing:.25},button:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:1.25},caption:{fontFamily:"Poppins",fontSize:12,fontWeight:"400",letterSpacing:.4},headline1:{fontFamily:"Poppins",fontSize:96,fontWeight:"300",letterSpacing:-1.5},headline2:{fontFamily:"Poppins",fontSize:60,fontWeight:"300",letterSpacing:-.5},headline3:{fontFamily:"Poppins",fontSize:48,fontWeight:"700",letterSpacing:0},headline4:{fontFamily:"Poppins",fontSize:36,fontWeight:"500",letterSpacing:.25},headline5:{fontFamily:"Poppins",fontSize:24,fontWeight:"400",letterSpacing:0},headline6:{fontFamily:"Poppins",fontSize:20,fontWeight:"500",letterSpacing:.15},overline:{fontFamily:"Poppins",fontSize:10,fontWeight:"400",letterSpacing:1.5},subtitle1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.15},subtitle2:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:.1}}),A=function(){var e=Object(v.b)(),t=z(q);return u.a.createElement(h.a,{style:t.avatarWatermark},u.a.createElement(J.a,{color:e.colors.accent,style:H.body2,name:"person"}))},q=function(e){return b.a.create({avatarWatermark:{position:"absolute",top:4,right:4}})},Z=n(88),G=n(46),M=function(e){var t=e.value,n=e.onChangeText,a=Object(v.b)(),r=z(_),i=Object(s.useState)(!1),c=o()(i,2),l=c[0],f=c[1],d=Object(s.useRef)(null),m=Object(s.useCallback)((function(){0===(null==t?void 0:t.length)&&n("Guest"),f((function(e){return!e}))}),[n,t]);return Object(s.useEffect)((function(){var e;l&&(null==(e=d.current)||e.focus())}),[l]),l?u.a.createElement(h.a,{style:r.updatableUserNameContainer},u.a.createElement(h.a,{style:{flex:1}},u.a.createElement(Z.a,{ref:d,style:{paddingHorizontal:4,color:a.colors.text},value:t,onChangeText:n,onSubmitEditing:m})),u.a.createElement(G.a,{onPress:m,style:r.button},u.a.createElement(O.a,{style:[H.overline,r.buttonText]},"OK"))):u.a.createElement(G.a,{onPress:m},u.a.createElement(B,{userName:t}))},B=function(e){var t=e.userName,n=z(_);return u.a.createElement(h.a,{style:n.userCardSubtitleContainer},u.a.createElement(O.a,{style:H.body2,numberOfLines:1},t))},_=function(e){return b.a.create({button:{backgroundColor:e.colors.accent,borderRadius:e.roundness,marginLeft:8,paddingHorizontal:8,paddingVertical:4},buttonText:{fontWeight:"900"},updatableUserNameContainer:{alignItems:"center",backgroundColor:e.colors.primary,flexDirection:"row",padding:4},userCardSubtitleContainer:{alignItems:"center",backgroundColor:e.colors.primary,flexShrink:1,minHeight:32,paddingHorizontal:4,paddingVertical:8},userCardTitleContainer:{alignItems:"center",flex:1,justifyContent:"center"}})},K=function(e){var t=e.onUserNameChange,n=e.resultValue,a=e.showAvatar,r=e.username,o=e.isExtreme,i=z(Q),c=n&&"hidden"!==n?n:"?";return u.a.createElement(y.a,{style:[a&&i.avatarDecoration,i.resultCard,o&&i.isExtreme]},a&&u.a.createElement(A,null),u.a.createElement(h.a,{style:i.resultCardTitleContainer},u.a.createElement(O.a,{style:H.headline4},c)),a?u.a.createElement(M,{value:r,onChangeText:t}):u.a.createElement(B,{userName:r}))},Q=function(e){return b.a.create({avatarDecoration:{borderWidth:2,borderColor:e.colors.primary},isExtreme:{borderColor:e.colors.accent},resultCard:{borderRadius:2*e.roundness,elevation:8,height:112,margin:8,overflow:"hidden",width:96},resultCardTitleContainer:{alignItems:"center",flex:1,justifyContent:"center"}})},X=function(e){var t=e.users,n=e.userId,a=e.userName,r=e.onUserNameChange,o=t.sort((function(e,t){return Y(e.voteValue)-Y(t.voteValue)})),i=o.length?o[0].voteValue:0,c=o.length?o[o.length-1].voteValue:0;return u.a.createElement(F,{mode:"center"},o.map((function(e){var t=e.id===n,o=void 0!==e.voteValue&&"hidden"!==e.voteValue&&i!==c&&(e.voteValue===i||e.voteValue===c);return u.a.createElement(K,{key:e.id,resultValue:e.voteValue,showAvatar:t,username:n===e.id&&a?a:e.userName,isExtreme:o,onUserNameChange:r})})))},Y=function(e){switch(typeof e){case"number":return e;default:return Number.MAX_SAFE_INTEGER}},$=n(256),ee=function(e,t){switch(e){case-1:return t?a.DarkDisabled:a.LightDisabled;case 0:return t?a.DarkZero:a.LightZero;case 1:return t?a.DarkOne:a.LightOne;case 2:return t?a.DarkTwo:a.LightTwo;case 3:return t?a.DarkThree:a.LightThree;case 5:return t?a.DarkFive:a.LightFive;case 8:return t?a.DarkEight:a.LightEight;case 13:return t?a.DarkThirteen:a.LightThirteen;case 21:return t?a.DarkTwentyOne:a.LightTwentyOne;default:return t?a.DarkUnknown:a.LightUnknown}},te=function(e){var t=e.value,n=e.onPress,a=e.isDark,r=e.greyedOut,o=z(ne),i={backgroundColor:ee(r?-1:t,a)},c=Object(s.useCallback)((function(){return n(t)}),[n,t]);return u.a.createElement($.a,{style:[o.valueContainer,i],onPress:c},u.a.createElement(h.a,{style:o.valueCard},u.a.createElement(O.a,{style:[H.subtitle1,{fontWeight:"900"}]},t)))},ne=function(e){return b.a.create({valueCard:{alignItems:"center",borderRadius:8,height:50,justifyContent:"center",width:50},valueContainer:{marginHorizontal:8,elevation:4,marginVertical:4}})},ae=[0,1,2,3,5,8,13,21,"\ud83e\udd14"],re=function(e){var t=e.onValuePress,n=e.selectedValue,a=e.isDark,r=z(oe);return u.a.createElement(h.a,{style:r.container},ae.map((function(e){return u.a.createElement(te,{key:e,value:e,onPress:t,isDark:a,greyedOut:void 0!==n&&n!==e})})))},oe=function(e){return b.a.create({container:{flexDirection:"row",justifyContent:"center",flexWrap:"wrap",width:"100%"}})},ie=function(e){var t=e.isDark,n=e.toggleTheme,r=z(ce),o=Object(k.useMediaQuery)({query:"(min-device-width: 600px)"}),c=o?H.headline3:H.headline4,l=Object(v.b)(),f=T(),d=f.name,m=f.setName,b=f.voteValue,E=f.vote,S=f.room,w=f.userId,j=f.reset,C=f.reveal,P=Object(s.useCallback)((function(e){m(e),i.a.setItem("username",e)}),[m]),x=Object(s.useCallback)((function(){var e=window.location.href;p.a.setString(e)}),[]);return Object(s.useEffect)((function(){i.a.getItem("username").then((function(e){e&&P(e)}))}),[P]),u.a.createElement(y.a,{style:r.page},u.a.createElement(y.a,{style:[r.canvas,{width:o?"90%":"100%"}]},u.a.createElement(O.a,{style:c},"Planning Poker \ud83c\udfb2"),u.a.createElement(h.a,{style:r.spacedRow},u.a.createElement(D,{icon:"share",label:"Share room",mode:"outlined",onPress:x}),u.a.createElement(g.a,{value:t,onChange:n})),u.a.createElement(h.a,{style:r.divider}),u.a.createElement(h.a,{style:r.centerRow},u.a.createElement(D,{icon:"replay",label:"Reset",mode:"contained",onPress:j}),u.a.createElement(D,{icon:"eye-check-outline",label:"Reveal",mode:"contained",onPress:C,color:l.dark?a.DarkZero:a.LightZero})),u.a.createElement(re,{onValuePress:E,isDark:t,selectedValue:b}),u.a.createElement(X,{users:Object.values(S.users),userId:w,userName:d,onUserNameChange:P})))},ce=function(e){return b.a.create({canvas:{alignItems:"center",height:"100%",paddingHorizontal:16,paddingVertical:16},centerRow:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingVertical:8},divider:{alignSelf:"stretch",borderBottomColor:e.colors.primary,borderBottomWidth:2},page:{alignItems:"center",backgroundColor:e.colors.primary,flex:1},spacedRow:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",maxWidth:375,paddingVertical:8,width:"100%"}})},le=n(13),se=n.n(le),ue=n(61),fe=n(101);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe={light:me({},ue.a,{colors:me({},ue.a.colors,{accent:"#ef8354",primary:"#eaeaeb",surface:"#bfc0c0",text:"#000000"})}),dark:me({},fe.a,{colors:me({},fe.a.colors,{accent:"#cd4b13",primary:"#292d3d",surface:"#323a49",text:"#ffffff"})})};t.a=function(){var e=N(),t=Object(s.useState)(e),a=o()(t,2),r=a[0],m=a[1],p=Object(c.a)({Poppins:n(242)}),g=o()(p,1)[0],b=Object(s.useCallback)((function(){m(!r),i.a.setItem("isDark",JSON.stringify(!r))}),[r,m]);return Object(s.useEffect)((function(){i.a.getItem("isDark").then((function(e){e&&m(JSON.parse(e))}))}),[]),g?u.a.createElement(f.AppearanceProvider,null,u.a.createElement(d.a,{theme:r?pe.dark:pe.light},u.a.createElement(ie,{isDark:r,toggleTheme:b}))):u.a.createElement(l.a,null)}},188:function(e,t,n){e.exports=n(246)},242:function(e,t,n){e.exports=n.p+"./fonts/Poppins-Regular.ttf"}},[[188,1,2]]]);
//# sourceMappingURL=app.cd8f5af4.chunk.js.map