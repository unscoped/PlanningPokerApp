(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{161:function(e,t,n){"use strict";var r,a=n(16),o=n.n(a),i=n(116),c=n(58),s=n(164),l=n(0),u=n(242),d=n(162),f=n(163),b=n(1),h=n(3),j=n(21),p=n(105),g=n(102),O=n(135);!function(e){e.DarkZero="#292d3d",e.DarkOne="#37324e",e.DarkTwo="#4d355b",e.DarkThree="#693462",e.DarkFive="#853161",e.DarkEight="#a02d59",e.DarkThirteen="#b62e49",e.DarkTwentyOne="#c63834",e.DarkUnknown="#cd4b13",e.DarkDisabled="#333",e.LightZero="#eaeaeb",e.LightOne="#e4deec",e.LightTwo="#e5d1e9",e.LightThree="#ebc2e0",e.LightFive="#f4b2cf",e.LightEight="#fba2b7",e.LightThirteen="#fe949a",e.LightTwentyOne="#fb8978",e.LightUnknown="#ef8354",e.LightDisabled="#ccc"}(r||(r={}));var m=n(10),v=n.n(m),y=n(244),x=n(245),w=n(5);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C,D=function(e){var t=e.color,n=e.icon,r=e.label,a=e.mode,o=e.onPress,i=Object(j.b)(),c=Object(l.useCallback)((function(e){return Object(w.jsx)(y.a,S(S({},e),{},{style:{margin:0},color:i.colors.text,icon:n}))}),[n,i.colors.text]);return Object(w.jsx)(x.a,{style:{marginHorizontal:8},accessibilityRole:"button",color:null!=t?t:i.colors.accent,icon:c,mode:a,onPress:o,children:Object(w.jsx)(g.a,{style:{fontWeight:"bold"},children:r})})},P=n(4),R=n.n(P),V=n(114),I=n.n(V),W=n(9);!function(e){e.JoinRequest="JoinRequest",e.JoinResponse="JoinResponse",e.LeaveRequest="LeaveRequest",e.Reset="Reset",e.Reveal="Reveal",e.RoomUpdate="RoomUpdate",e.SetName="SetName",e.SetVoteValue="SetVoteValue"}(C||(C={}));var L=function(e,t){e.readyState===WebSocket.OPEN&&e.send(JSON.stringify(t))},T=function(e){0},E=function(){var e=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)||void 0}("roomId"),t=function(){if(e)return e;var t=new I.a(4).toString();return"web"===W.a.OS&&(window.location.search="roomId="+t),t}(),n=Object(l.useState)("Guest"),r=o()(n,2),a=r[0],i=r[1],s=Object(l.useState)(),u=o()(s,2),d=u[0],f=u[1],b=Object(l.useState)(),h=o()(b,2),j=h[0],p=h[1],g=function(e,t,n){var r=Object(l.useMemo)((function(){var r=new WebSocket("wss://planningpokerserver.herokuapp.com/");return r.onopen=e,r.onmessage=t,r.onerror=n,r}),[]);return Object(l.useEffect)((function(){r.onmessage=t}),[t,r]),Object(l.useEffect)((function(){r.onerror=n}),[n,r]),r}(Object(l.useCallback)((function(){!function(){var e,n;R.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,R.a.awrap(c.a.getItem("username"));case 3:e=r.sent,n={type:C.JoinRequest,roomId:t,payload:{name:null!=e?e:"Guest"}},L(g,n);case 6:case"end":return r.stop()}}),null,null,null,Promise)}()}),[]),Object(l.useCallback)((function(e){if("Heartbeat"!==e.data)try{var t=JSON.parse(e.data);switch(t.type){case C.JoinResponse:p(t.payload.userId);break;case C.RoomUpdate:0,y(t.payload.room),j&&"hidden"!==t.payload.room.users[j].voteValue&&f(t.payload.room.users[j].voteValue)}}catch(n){console.error("Error while parsing JSON",e.data)}else console.log("Received heartbeat from server")}),[j]),T),O=Object(l.useState)({id:t||new I.a(4).toString(),name:"",users:{},admin:void 0}),m=o()(O,2),v=m[0],y=m[1],x=Object(l.useCallback)((function(e){i(e);var t={type:C.SetName,roomId:v.id,payload:{name:e}};L(g,t)}),[v.id,g]),w=Object(l.useCallback)((function(e){f(e);var t={type:C.SetVoteValue,roomId:v.id,payload:{voteValue:e}};L(g,t)}),[v.id,g]);return{name:a,reset:Object(l.useCallback)((function(){f(void 0);var e={type:C.Reset,roomId:v.id};L(g,e)}),[v.id,g]),reveal:Object(l.useCallback)((function(){var e={type:C.Reveal,roomId:v.id};L(g,e)}),[v.id,g]),room:v,setName:x,userId:j,vote:w,voteValue:d}},N=n(29),z=function(){var e=Object(l.useState)("dark"===N.a.getColorScheme()),t=o()(e,2),n=t[0],r=t[1];return Object(l.useEffect)((function(){var e=N.a.addChangeListener((function(e){var t=e.colorScheme;r("dark"===t)}));return function(){return e.remove()}}),[]),n},F=function(e){var t=Object(j.b)(),n=Object(l.useState)(e(t)),r=o()(n,2),a=r[0],i=r[1];return Object(l.useEffect)((function(){i(e(t))}),[e,t]),a},U=function(e){var t=e.children,n=e.mode;return Object(w.jsx)(h.a,{style:[J.flexWrapRow,{justifyContent:n}],children:t})},J=b.a.create({flexWrapRow:{alignItems:"center",alignSelf:"stretch",flexDirection:"row",flexWrap:"wrap",marginVertical:16}}),H=n(240),q=b.a.create({body1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.5},body2:{fontFamily:"Poppins",fontSize:14,fontWeight:"400",letterSpacing:.25},button:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:1.25},caption:{fontFamily:"Poppins",fontSize:12,fontWeight:"400",letterSpacing:.4},headline1:{fontFamily:"Poppins",fontSize:96,fontWeight:"300",letterSpacing:-1.5},headline2:{fontFamily:"Poppins",fontSize:60,fontWeight:"300",letterSpacing:-.5},headline3:{fontFamily:"Poppins",fontSize:48,fontWeight:"700",letterSpacing:0},headline4:{fontFamily:"Poppins",fontSize:36,fontWeight:"500",letterSpacing:.25},headline5:{fontFamily:"Poppins",fontSize:24,fontWeight:"400",letterSpacing:0},headline6:{fontFamily:"Poppins",fontSize:20,fontWeight:"500",letterSpacing:.15},overline:{fontFamily:"Poppins",fontSize:10,fontWeight:"400",letterSpacing:1.5},subtitle1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.15},subtitle2:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:.1}}),Z=function(){var e=Object(j.b)(),t=F(A);return Object(w.jsx)(h.a,{style:t.avatarWatermark,children:Object(w.jsx)(H.a,{color:e.colors.accent,style:q.body2,name:"person"})})},A=function(e){return b.a.create({avatarWatermark:{position:"absolute",top:4,right:4}})},G=n(88),M=n(47),B=function(e){var t=e.value,n=e.onChangeText,r=Object(j.b)(),a=F(K),i=Object(l.useState)(!1),c=o()(i,2),s=c[0],u=c[1],d=Object(l.useRef)(null),f=Object(l.useCallback)((function(){0===(null==t?void 0:t.length)&&n("Guest"),u((function(e){return!e}))}),[n,t]);return Object(l.useEffect)((function(){var e;s&&(null==(e=d.current)||e.focus())}),[s]),s?Object(w.jsxs)(h.a,{style:a.updatableUserNameContainer,children:[Object(w.jsx)(h.a,{style:{flex:1},children:Object(w.jsx)(G.a,{ref:d,style:{paddingHorizontal:4,color:r.colors.text},value:t,onChangeText:n,onSubmitEditing:f})}),Object(w.jsx)(M.a,{onPress:f,style:a.button,children:Object(w.jsx)(g.a,{style:[q.overline,a.buttonText],children:"OK"})})]}):Object(w.jsx)(M.a,{onPress:f,children:Object(w.jsx)(_,{userName:t})})},_=function(e){var t=e.userName,n=F(K);return Object(w.jsx)(h.a,{style:n.userCardSubtitleContainer,children:Object(w.jsx)(g.a,{style:q.body2,numberOfLines:1,children:t})})},K=function(e){return b.a.create({button:{backgroundColor:e.colors.accent,borderRadius:e.roundness,marginLeft:8,paddingHorizontal:8,paddingVertical:4},buttonText:{fontWeight:"900"},updatableUserNameContainer:{alignItems:"center",backgroundColor:e.colors.primary,flexDirection:"row",padding:4},userCardSubtitleContainer:{alignItems:"center",backgroundColor:e.colors.primary,flexShrink:1,minHeight:32,paddingHorizontal:4,paddingVertical:8},userCardTitleContainer:{alignItems:"center",flex:1,justifyContent:"center"}})},Q=function(e){var t=e.onUserNameChange,n=e.resultValue,r=e.showAvatar,a=e.username,o=e.isExtreme,i=F(X),c=function(e){switch(e){case void 0:return"?";case"hidden":return"\u2713";default:return e}}(n);return Object(w.jsxs)(p.a,{style:[r&&i.avatarDecoration,i.resultCard,o&&i.isExtreme],children:[r&&Object(w.jsx)(Z,{}),Object(w.jsx)(h.a,{style:i.resultCardTitleContainer,children:Object(w.jsx)(g.a,{style:q.headline4,children:c})}),r?Object(w.jsx)(B,{value:a,onChangeText:t}):Object(w.jsx)(_,{userName:a})]})},X=function(e){return b.a.create({avatarDecoration:{borderWidth:2,borderColor:e.colors.primary},isExtreme:{borderColor:e.colors.accent},resultCard:{borderRadius:2*e.roundness,elevation:8,height:112,margin:8,overflow:"hidden",width:96},resultCardTitleContainer:{alignItems:"center",flex:1,justifyContent:"center"}})},Y=function(e){var t=e.users,n=e.userId,r=e.userName,a=e.onUserNameChange,o=t.sort((function(e,t){return $(e.voteValue)-$(t.voteValue)})),i=o.length?o[0].voteValue:0,c=o.length?o[o.length-1].voteValue:0;return Object(w.jsx)(U,{mode:"center",children:o.map((function(e){var t=e.id===n,o=void 0!==e.voteValue&&"hidden"!==e.voteValue&&i!==c&&(e.voteValue===i||e.voteValue===c);return Object(w.jsx)(Q,{resultValue:e.voteValue,showAvatar:t,username:n===e.id&&r?r:e.userName,isExtreme:o,onUserNameChange:a},e.id)}))})},$=function(e){switch(typeof e){case"number":return e;default:return Number.MAX_SAFE_INTEGER}},ee=n(241),te=function(e,t){switch(e){case-1:return t?r.DarkDisabled:r.LightDisabled;case 0:return t?r.DarkZero:r.LightZero;case 1:return t?r.DarkOne:r.LightOne;case 2:return t?r.DarkTwo:r.LightTwo;case 3:return t?r.DarkThree:r.LightThree;case 5:return t?r.DarkFive:r.LightFive;case 8:return t?r.DarkEight:r.LightEight;case 13:return t?r.DarkThirteen:r.LightThirteen;case 21:return t?r.DarkTwentyOne:r.LightTwentyOne;default:return t?r.DarkUnknown:r.LightUnknown}},ne=function(e){var t=e.value,n=e.onPress,r=e.isDark,a=e.greyedOut,o=F(re),i={backgroundColor:te(a?-1:t,r)},c=Object(l.useCallback)((function(){return n(t)}),[n,t]);return Object(w.jsx)(ee.a,{style:[o.valueContainer,i],onPress:c,children:Object(w.jsx)(h.a,{style:o.valueCard,children:Object(w.jsx)(g.a,{style:[q.subtitle1,{fontWeight:"900"}],children:t})})})},re=function(e){return b.a.create({valueCard:{alignItems:"center",borderRadius:8,height:50,justifyContent:"center",width:50},valueContainer:{marginHorizontal:8,elevation:4,marginVertical:4}})},ae=[0,1,2,3,5,8,13,21,"\ud83e\udd14"],oe=function(e){var t=e.onValuePress,n=e.selectedValue,r=e.isDark,a=F(ie);return Object(w.jsx)(h.a,{style:a.container,children:ae.map((function(e){return Object(w.jsx)(ne,{value:e,onPress:t,isDark:r,greyedOut:void 0!==n&&n!==e},e)}))})},ie=function(e){return b.a.create({container:{flexDirection:"row",justifyContent:"center",flexWrap:"wrap",width:"100%"}})},ce=function(e){var t=e.isDark,n=e.toggleTheme,a=F(se),o=Object(O.useMediaQuery)({query:"(min-device-width: 600px)"}),i=o?q.headline3:q.headline4,s=Object(j.b)(),u=E(),b=u.name,m=u.setName,v=u.voteValue,y=u.vote,x=u.room,k=u.userId,S=u.reset,C=u.reveal,P=Object(l.useCallback)((function(e){m(e),c.a.setItem("username",e)}),[m]),R=Object(l.useCallback)((function(){var e=window.location.href;d.a(e)}),[]);return Object(l.useEffect)((function(){c.a.getItem("username").then((function(e){e&&P(e)}))}),[P]),Object(w.jsx)(p.a,{style:a.page,children:Object(w.jsxs)(p.a,{style:[a.canvas,{width:o?"90%":"100%"}],children:[Object(w.jsx)(g.a,{style:i,children:"Planning Poker \ud83c\udfb2"}),Object(w.jsxs)(h.a,{style:a.spacedRow,children:[Object(w.jsx)(D,{icon:"share",label:"Share room",mode:"outlined",onPress:R}),Object(w.jsx)(f.a,{value:t,onChange:n})]}),Object(w.jsx)(h.a,{style:a.divider}),Object(w.jsxs)(h.a,{style:a.centerRow,children:[Object(w.jsx)(D,{icon:"replay",label:"Reset",mode:"contained",onPress:S}),Object(w.jsx)(D,{icon:"eye-check-outline",label:"Reveal",mode:"contained",onPress:C,color:s.dark?r.DarkZero:r.LightZero})]}),Object(w.jsx)(oe,{onValuePress:y,isDark:t,selectedValue:v}),Object(w.jsx)(Y,{users:Object.values(x.users),userId:k,userName:b,onUserNameChange:P})]})})},se=function(e){return b.a.create({canvas:{alignItems:"center",height:"100%",paddingHorizontal:16,paddingVertical:16},centerRow:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",paddingVertical:8},divider:{alignSelf:"stretch",borderBottomColor:e.colors.primary,borderBottomWidth:2},page:{alignItems:"center",backgroundColor:e.colors.primary,flex:1},spacedRow:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",maxWidth:375,paddingVertical:8,width:"100%"}})},le=n(65),ue=n(101);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be={light:fe(fe({},le.a),{},{colors:fe(fe({},le.a.colors),{},{accent:"#ef8354",primary:"#eaeaeb",surface:"#bfc0c0",text:"#000000"})}),dark:fe(fe({},ue.a),{},{colors:fe(fe({},ue.a.colors),{},{accent:"#cd4b13",primary:"#292d3d",surface:"#323a49",text:"#ffffff"})})};t.a=function(){var e=z(),t=Object(l.useState)(e),n=o()(t,2),r=n[0],a=n[1],d=Object(i.b)({Poppins:i.a}),f=o()(d,1)[0],b=Object(l.useCallback)((function(){a(!r),c.a.setItem("isDark",JSON.stringify(!r))}),[r,a]);return Object(l.useEffect)((function(){c.a.getItem("isDark").then((function(e){e&&a(JSON.parse(e))}))}),[]),f?Object(w.jsx)(u.a,{theme:r?be.dark:be.light,children:Object(w.jsx)(ce,{isDark:r,toggleTheme:b})}):Object(w.jsx)(s.a,{})}},170:function(e,t,n){e.exports=n(232)}},[[170,1,2]]]);
//# sourceMappingURL=app.a0c144d4.chunk.js.map